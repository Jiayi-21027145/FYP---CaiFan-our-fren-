@model List<dynamic>

@{
    Layout = "_CaiFan"; // Ensure this layout exists
}

<!-- First Tab: Total Image Uploads by User -->
<div id="uploadsTab" class="tab-content">
@*     <h2>Total Image Uploads by User</h2> *@
    <canvas id="uploadsChart" width="400" height="200"></canvas>

    @section scripts
        {
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script>
            @if (Model != null && Model.Count > 0)
            {
                <text>
                                    var ctx = document.getElementById('uploadsChart').getContext('2d');
                var myChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Number of Uploads',
                            data: [@Model.Count],
                            backgroundColor: 'rgba(0, 123, 255, 0.5)',
                            borderColor: 'rgba(0, 123, 255, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        },
                        legend: {
                            display: true
                        },
                        title: {
                            display: true,
                            text: 'Total Image Uploads by User'
                        }
                    }
                });
                </text>
            }
            else
            {
                <text>
                    // Handle the case when Model is null or has no data
                    console.error("Model is null or has no data.");
                </text>
            }
        </script>
    }
</div>

<!-- Second Tab: Table with Top Dishes By Location -->
<div id="topDishesTab" class="tab-content">
    <!-- Your code for the second tab goes here -->
</div>

<!-- Third Tab: Review Rating (Bar Chart of 1-5 Rating) -->
<div id="reviewRatingTab" class="tab-content">
    <!-- Your code for the third tab goes here -->
</div>



@* @model List<dynamic>

@{
    Layout = "_CaiFan"; // Ensure this layout exists
}

<h2>Total Image Uploads by User</h2>
<canvas id="uploadsChart" width="400" height="200"></canvas>

@section scripts
    {
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        @if (Model != null && Model.Any())
        {
            <text>
                        var ctx = document.getElementById('uploadsChart').getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: @Html.Raw(Json.Serialize(Model.Select(u => u.UserId))),
                    datasets: [{
                        label: 'Number of Uploads',
                        data: @Html.Raw(Json.Serialize(Model.Select(u => u.UploadCount))),
                        backgroundColor: 'rgba(0, 123, 255, 0.5)',
                        borderColor: 'rgba(0, 123, 255, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    },
                    legend: {
                        display: true
                    },
                    title: {
                        display: true,
                        text: 'Total Image Uploads by User'
                    }
                }
            });
            </text>
        }
        else
        {
            <text>
                // Handle the case when Model is null or empty
                console.error("Model is null or has no data.");
            </text>
        }
    </script>
}

 *@