@{
    Layout = "_CaiFan";
    ViewData["Title"] = "Dish Frequency Chart";
}
<link href="~/css/profile.css" rel="stylesheet" />
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@ViewData["Title"]</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        #myPieChart {
            max-width: 300px;
            max-height: 300px;
            margin: auto;
        }
    </style>
</head>
<body>
    <h2>Dish Frequency Chart</h2>

    <div style="width: 300px; height: 300px; margin: auto;">
        <canvas id="myPieChart"></canvas>
    </div>

    <script>
        const ctx = document.getElementById('myPieChart').getContext('2d');

        fetch('/Pie/DishFrequencies') // Corrected fetch URL
            .then(response => response.json())
            .then(data => {
                const labels = data.map(item => item.key);
                const counts = data.map(item => item.count);

                const pieChart = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: labels,
                        datasets: [{
                            data: counts,
                            backgroundColor: [
                                'red', 'blue', 'green', 'yellow', 'purple', 'orange', 'pink', 'grey', 'lime', 'aqua', 'maroon', 'navy'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: true, // Maintains the aspect ratio defined below
                        aspectRatio: 1, // Default aspect ratio, adjust as needed
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            title: {
                                display: true,
                                text: 'Dish Frequencies'
                            }
                        }
                    }
                });
            })
            .catch(error => {
                console.error('Error fetching data:', error);
            });
    </script>
</body>
</html>

